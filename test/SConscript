#!python
Import('baseEnv opts GetPlatform buildDir PREFIX cppunit_options')

import os
pj = os.path.join

env = baseEnv.Copy()
env.Append(CPPPATH = Split('# #test'),
           LIBPATH = [pj('#', buildDir, 'cppdom')],
           LIBS = ['cppdom'])

tests = Split("""
   maketree
   nodetest
   parsetest
""")

for t in tests:
   env.Program(target = t, source = t+'.cpp')

subdirs = []
if cppunit_options.isAvailable():
   subdirs.append('suite')
SConscript(dirs = subdirs)
#for d in subdirs:
#	SConscript(pj('#', d, 'SConscript'), src_dir = d, build_dir = 'build.' + GetPlatform(), duplicate = 0)
